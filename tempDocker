team-service:
    build:
      context: ./
      dockerfile: ./team-service/Dockerfile
    ports:
      - "9000:9000"
    depends_on:
      - team-service-postgres
      - redis
      - rabbitMQ
    container_name: team-service
    networks:
      - team-service-network
      - microservices-network
    environment:
      - SPRING_DATASOURCE_URL=jdbc:postgresql://team-service-postgres:5432/team-service
      - SPRING_DATASOURCE_USERNAME=user
      - SPRING_DATASOURCE_PASSWORD=password
      - SPRING_JPA_HIBERNATE_DDL_AUTO=update
      - SPRING_JPA_SHOW-SQL=true
      - SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect
      - SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=true
      - SERVER_ERROR_INCLUDE_MESSAGE=always
      - SERVER_PORT=9000
      - SPRING_RABBITMQ_ADDRESSES=amqp://rabbitMQ:5672
      - SPRING_REDIS_HOST=redis
      - SPRING_REDIS_PORT=6379

identity-service:
    build:
      context: ./
      dockerfile: ./identity-service/Dockerfile
    ports:
      - "9010:9010"
    depends_on:
      - identity-service-postgres
      - redis
      - rabbitMQ
    container_name: identity-service
    networks:
      - identity-service-network
      - microservices-network
    environment:
      - SPRING_DATASOURCE_URL=jdbc:postgresql://identity-service-postgres:5433/identity-service
      - SPRING_DATASOURCE_USERNAME=user
      - SPRING_DATASOURCE_PASSWORD=password
      - SPRING_JPA_HIBERNATE_DDL_AUTO=update
      - SPRING_JPA_SHOW-SQL=true
      - SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect
      - SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=true
      - SERVER_ERROR_INCLUDE_MESSAGE=always
      - SERVER_PORT=9010
      - SPRING_RABBITMQ_ADDRESSES=amqp://rabbitMQ:5672
      - SPRING_REDIS_HOST=redis
      - SPRING_REDIS_PORT=6379
  currency-service:
    build:
      context: ./
      dockerfile: ./currency-service/Dockerfile
    ports:
      - "9020:9020"
    depends_on:
      - rabbitMQ
    container_name: currency-service
    networks:
      - microservices-network
    environment:
      - SERVER_ERROR_INCLUDE_MESSAGE=always
      - SERVER_PORT=9020
      - SPRING_RABBITMQ_ADDRESSES=amqp://rabbitMQ:5672

  costs-service:
    build:
      context: ./
      dockerfile: ./costs-service/Dockerfile
    ports:
      - "9030:9030"
    depends_on:
      - rabbitMQ
    container_name: costs-service
    networks:
      - microservices-network
    environment:
      - SERVER_ERROR_INCLUDE_MESSAGE=always
      - SERVER_PORT=9030
      - SPRING_RABBITMQ_ADDRESSES=amqp://rabbitMQ:5672